<?xml version="1.0"?>
<launch>
	<!-- ======================================================================================================================== -->
	<!-- arguments -->
	<arg name="map_file" default="$(find guardian_config)/localization/maps/lab_slam.yaml" />
	<arg name="robot_initial_x" default="3.874" />
	<arg name="robot_initial_y" default="1.833" />
	<arg name="robot_initial_yaw" default="-0.047" />
	<!--<arg name="robot_initial_x" default="-17.48" />
	<arg name="robot_initial_y" default="0.529" />
	<arg name="robot_initial_yaw" default="-0.071" />-->


	<!-- ======================================================================================================================== -->
	<!-- 2D costmap | only activate static tf when using only odometry or ekf -->
	<!-- <node pkg="tf" type="static_transform_publisher" name="map_to_odom" args="-3.2 -3.75 0 1.57079632679 0 0 /map /odom 100" /> -->
	<node name="map_server" pkg="map_server" type="map_server" args="$(arg map_file)">
		<param name="frame_id" value="map" />
	</node>


	<!-- ======================================================================================================================== -->
	<!-- simulated localization -->
	<!-- <include file="$(find guardian_navigation)/navigation_amcl/guardian_fake_localization.launch" /> -->

	<!-- amcl localization -->
	<!-- <include file="$(find guardian_navigation)/navigation_amcl/amcl_guardian.launch" /> -->

	<!--- EFK Filter | to run ekf, switch the arg publish_tf_on_guardian_robot_control to false in the include of guardian.launch -->
	<!-- <include file="$(find guardian_navigation)/navigation_ekf/ekf.launch" /> -->

	<!-- ICP pose corrections -->
	<include file="$(find dynamic_robot_localization)/launch/dynamic_robot_localization_system.launch" >
		<arg name="robot_initial_pose_in_base_to_map" default="false" /> <!-- odom to map -->
		<arg name="robot_initial_x" default="$(arg robot_initial_x)" />
		<arg name="robot_initial_y" default="$(arg robot_initial_y)" />
		<arg name="robot_initial_yaw" default="$(arg robot_initial_yaw)" />
		<!-- <arg name="yaml_configuration_filters_filename" default="$(find dynamic_robot_localization)/yaml/configs/filters/filters_2d.yaml" /> -->
		<arg name="yaml_configuration_filters_filename" default="$(find dynamic_robot_localization)/yaml/configs/filters/filters_large_map_2d.yaml" />
		<!-- <arg name="yaml_configuration_tracking_filename" default="$(find dynamic_robot_localization)/yaml/configs/pose_tracking/static_2d.yaml" /> -->
		<!-- <arg name="yaml_configuration_tracking_filename" default="$(find dynamic_robot_localization)/yaml/configs/pose_tracking/unstable_ground_2d.yaml" /> -->
		<!-- <arg name="yaml_configuration_tracking_filename" default="$(find dynamic_robot_localization)/yaml/configs/pose_tracking/cluttered_environments_2d.yaml" /> -->
		<!-- <arg name="yaml_configuration_tracking_filename" default="$(find dynamic_robot_localization)/yaml/configs/pose_tracking/cluttered_environments_dynamic_2d.yaml" /> -->
		<arg name="yaml_configuration_tracking_filename" default="$(find dynamic_robot_localization)/yaml/configs/pose_tracking/cluttered_environments_dynamic_large_map_2d.yaml" />
		<arg name="laser_scan_topics" default="/guardian/laser_tilt_front+/guardian/laser_horizontal_back" />
		<arg name="sensor_frame_id" default="base_link" />
		<arg name="publish_last_pose_tf_timeout_seconds" default="2.0" />
		<arg name="use_dynamic_map_update" default="0" />
		<arg name="publish_pose_tf_rate" default="50.0" />
		<arg name="number_of_scans_to_assemble_per_cloud" default="4" />
		<arg name="interpolate_scans" default="true" />
	</include>


	<!-- ======================================================================================================================== -->
	<!-- trajectory planner -->
	<!-- <include file="$(find guardian_navigation)/navigation_local/move_base_local.launch" /> -->
</launch>
